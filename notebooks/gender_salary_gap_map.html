

<!DOCTYPE html>


<html lang="en" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>&lt;no title&gt; &#8212; Gender Pay Gap</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/gender_salary_gap_map';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../docs/introduction.html">
  
  
  
  
  
    <p class="title logo__title">Gender Pay Gap</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../docs/introduction.html">
                    Introduction
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../docs/dataset-preprocessing.html">Dataset and preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="story.html">The salary gap in software development</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/gender_salary_gap_map.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1><no title></h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="simple visible nav section-nav flex-column">
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">run</span> set_theme.ipynb
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span><span class="w"></span>
<span class="p">.</span><span class="nc">slider-container</span><span class="w"> </span><span class="p">.</span><span class="nc">slider-rail-rect</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fill</span><span class="p">:</span><span class="w"> </span><span class="mh">#d8bea1</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">stroke-width</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="kt">px</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="p">.</span><span class="nc">slider-grip-rect</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fill</span><span class="p">:</span><span class="w"> </span><span class="mh">#343a42</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">stroke-width</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">filter</span><span class="p">:</span><span class="w"> </span><span class="nb">drop-shadow</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">3</span><span class="kt">px</span><span class="w"> </span><span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.slider-container .slider-rail-rect {
    fill: #d8bea1 !important;
    stroke-width: 0 !important;
    height: 7px !important;
}
.slider-grip-rect {
    fill: #343a42 !important;
    stroke-width: 0 !important;
    filter: drop-shadow(0 0 3px rgba(0, 0, 0, 0.3));
}
</style>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="k">as</span> <span class="nn">go</span>
<span class="kn">import</span> <span class="nn">plotly.colors</span> <span class="k">as</span> <span class="nn">pc</span>
<span class="kn">from</span> <span class="nn">plotly.offline</span> <span class="kn">import</span> <span class="n">init_notebook_mode</span>
<span class="n">init_notebook_mode</span><span class="p">(</span><span class="n">connected</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">        <script type="text/javascript">
        window.PlotlyConfig = {MathJaxConfig: 'local'};
        if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
        if (typeof require !== 'undefined') {
        require.undef("plotly");
        requirejs.config({
            paths: {
                'plotly': ['https://cdn.plot.ly/plotly-2.24.1.min']
            }
        });
        require(['plotly'], function(Plotly) {
            window._Plotly = Plotly;
        });
        }
        </script>
        </div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s1">&#39;../data/SO_2014_2022.pq&#39;</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Salary&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Salary&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">250000</span><span class="p">)]</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Year</th>
      <th>Salary</th>
      <th>JobSat</th>
      <th>YearsCode</th>
      <th>YearsCodePro</th>
      <th>Age</th>
      <th>Education</th>
      <th>OrgSize</th>
      <th>LastNewJob</th>
      <th>Employment</th>
      <th>RespondentType</th>
      <th>JobSeek</th>
      <th>Gender</th>
      <th>Student</th>
      <th>Country</th>
      <th>CodingActivities</th>
      <th>DevType</th>
      <th>LearnCodeFrom</th>
      <th>LangPresent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2022</td>
      <td>69318.0</td>
      <td>&lt;NA&gt;</td>
      <td>10</td>
      <td>5</td>
      <td>25-34</td>
      <td>master</td>
      <td>500 to 999 employees</td>
      <td>&lt;NA&gt;</td>
      <td>fulltime</td>
      <td>dev</td>
      <td>&lt;NA&gt;</td>
      <td>male</td>
      <td>no</td>
      <td>Germany</td>
      <td>School or academic work</td>
      <td>Data scientist or machine learning specialist;...</td>
      <td>Books / Physical media;School (i.e., Universit...</td>
      <td>C;C++;Java;JavaScript;MATLAB;Python;Scala;SQL;...</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2022</td>
      <td>27652.0</td>
      <td>&lt;NA&gt;</td>
      <td>18</td>
      <td>10</td>
      <td>25-34</td>
      <td>bachelor</td>
      <td>1,000 to 4,999 employees</td>
      <td>&lt;NA&gt;</td>
      <td>fulltime</td>
      <td>dev</td>
      <td>&lt;NA&gt;</td>
      <td>male</td>
      <td>no</td>
      <td>Colombia</td>
      <td>Hobby</td>
      <td>Developer, full-stack;Developer, back-end</td>
      <td>Books / Physical media;Other online resources ...</td>
      <td>Bash/Shell/PowerShell;Elixir;HTML/CSS;JavaScri...</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2022</td>
      <td>15431.0</td>
      <td>&lt;NA&gt;</td>
      <td>5</td>
      <td>5</td>
      <td>25-34</td>
      <td>bachelor</td>
      <td>20 to 99 employees</td>
      <td>&lt;NA&gt;</td>
      <td>fulltime</td>
      <td>dev</td>
      <td>&lt;NA&gt;</td>
      <td>male</td>
      <td>no</td>
      <td>Ghana</td>
      <td>Freelance/contract work</td>
      <td>Developer, back-end</td>
      <td>On the job training;Coding Bootcamp</td>
      <td>JavaScript;Ruby</td>
    </tr>
    <tr>
      <th>13</th>
      <td>2022</td>
      <td>47352.0</td>
      <td>&lt;NA&gt;</td>
      <td>7</td>
      <td>7</td>
      <td>45-54</td>
      <td>master</td>
      <td>10 to 19 employees</td>
      <td>&lt;NA&gt;</td>
      <td>fulltime</td>
      <td>non-dev</td>
      <td>&lt;NA&gt;</td>
      <td>male</td>
      <td>no</td>
      <td>Belgium</td>
      <td>Hobby</td>
      <td>Developer, back-end;Educator or academic;Datab...</td>
      <td>Books / Physical media;On the job training;Col...</td>
      <td>Delphi;SQL</td>
    </tr>
    <tr>
      <th>22</th>
      <td>2022</td>
      <td>78084.0</td>
      <td>&lt;NA&gt;</td>
      <td>25</td>
      <td>25</td>
      <td>45-54</td>
      <td>bachelor</td>
      <td>500 to 999 employees</td>
      <td>&lt;NA&gt;</td>
      <td>fulltime</td>
      <td>non-dev</td>
      <td>&lt;NA&gt;</td>
      <td>male</td>
      <td>no</td>
      <td>Canada</td>
      <td>Hobby;Contribute to open-source projects</td>
      <td>Engineer, site reliability;Security professional</td>
      <td>Books / Physical media;Other online resources ...</td>
      <td>Bash/Shell/PowerShell;C;JavaScript;Perl;PHP;Py...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_salary_gap_by_age</span><span class="p">(</span><span class="n">age_range</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
    <span class="c1"># Get male salary distribution per country.</span>
    <span class="n">salary_men_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Gender == &quot;male&quot; &amp; Age == &quot;</span><span class="si">{</span><span class="n">age_range</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Country&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">agg</span><span class="p">({</span> <span class="s1">&#39;Salary&#39;</span><span class="p">:</span> <span class="s1">&#39;mean&#39;</span> <span class="p">})</span> \
        <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Salary&#39;</span><span class="p">:</span> <span class="s1">&#39;SalaryMen&#39;</span><span class="p">})</span>
    
    <span class="c1"># Get female salary distribution per country.</span>
    <span class="n">salary_women_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Gender == &quot;female&quot; &amp; Age == &quot;</span><span class="si">{</span><span class="n">age_range</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Country&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">agg</span><span class="p">({</span> <span class="s1">&#39;Salary&#39;</span><span class="p">:</span> <span class="s1">&#39;mean&#39;</span> <span class="p">})</span> \
        <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Salary&#39;</span><span class="p">:</span> <span class="s1">&#39;SalaryWomen&#39;</span><span class="p">})</span>

    <span class="c1"># Calculate salary gap.</span>
    <span class="n">new_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">salary_men_df</span><span class="p">,</span> <span class="n">salary_women_df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;Country&#39;</span><span class="p">)</span>
    <span class="n">new_df</span><span class="p">[</span><span class="s1">&#39;SalaryGap&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">new_df</span><span class="p">[</span><span class="s1">&#39;SalaryMen&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">new_df</span><span class="p">[</span><span class="s1">&#39;SalaryWomen&#39;</span><span class="p">])</span>        
    <span class="n">new_df</span><span class="p">[</span><span class="s1">&#39;SalaryGapPercent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">new_df</span><span class="p">[</span><span class="s1">&#39;SalaryMen&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">new_df</span><span class="p">[</span><span class="s1">&#39;SalaryWomen&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="n">new_df</span><span class="p">[</span><span class="s1">&#39;SalaryMen&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span>

    <span class="k">return</span> <span class="n">new_df</span>


<span class="k">def</span> <span class="nf">make_title</span><span class="p">(</span><span class="n">age_range</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Create the plot title, given the age range.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Global Salary Gap Distribution Between Men and Women (</span><span class="si">{</span><span class="n">age_range</span><span class="si">}</span><span class="s1"> years old)&#39;</span> <span class="o">+</span> \
            <span class="s1">&#39;&lt;br&gt;&lt;sup&gt;In most countries, a neutral or female-favoured pay gap turns male favoured at ages 35+&lt;/sup&gt;&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Gather all age ranges.</span>
<span class="n">age_bins</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Age&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span>

<span class="c1"># Create traces (maps with data) for each age.</span>
<span class="n">traces</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">age_range</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">age_bins</span><span class="p">):</span>
    <span class="n">age_salary_gap_df</span> <span class="o">=</span> <span class="n">get_salary_gap_by_age</span><span class="p">(</span><span class="n">age_range</span><span class="p">)</span>
    <span class="n">trace</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Choropleth</span><span class="p">(</span>
        <span class="n">locations</span><span class="o">=</span><span class="n">age_salary_gap_df</span><span class="p">[</span><span class="s1">&#39;Country&#39;</span><span class="p">],</span>
        <span class="n">locationmode</span><span class="o">=</span><span class="s1">&#39;country names&#39;</span><span class="p">,</span>
        <span class="n">z</span><span class="o">=</span><span class="n">age_salary_gap_df</span><span class="p">[</span><span class="s1">&#39;SalaryGapPercent&#39;</span><span class="p">],</span>
        <span class="n">colorscale</span><span class="o">=</span><span class="n">pc</span><span class="o">.</span><span class="n">make_colorscale</span><span class="p">([</span><span class="s1">&#39;#ff1df1&#39;</span><span class="p">,</span> <span class="s1">&#39;#a1daa5&#39;</span><span class="p">,</span> <span class="s1">&#39;#352bff&#39;</span><span class="p">]),</span>
        <span class="n">hovertemplate</span><span class="o">=</span><span class="s1">&#39;&lt;b&gt;%</span><span class="si">{location}</span><span class="s1">&lt;/b&gt;&lt;br&gt;Salary gap: %</span><span class="si">{z:.1f}</span><span class="s1">%&lt;extra&gt;&lt;/extra&gt;&#39;</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="p">(</span><span class="kc">True</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">False</span><span class="p">),</span> <span class="c1"># make first trace visible by default</span>
        <span class="n">colorbar</span><span class="o">=</span><span class="n">go</span><span class="o">.</span><span class="n">choropleth</span><span class="o">.</span><span class="n">ColorBar</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="mf">0.92</span><span class="p">,</span>
            <span class="n">xref</span><span class="o">=</span><span class="s1">&#39;paper&#39;</span><span class="p">,</span>
            <span class="n">yref</span><span class="o">=</span><span class="s1">&#39;paper&#39;</span><span class="p">,</span>
            <span class="n">xanchor</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
            <span class="n">yanchor</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
            <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">,</span>
            <span class="nb">len</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
            <span class="n">thickness</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">tickmode</span><span class="o">=</span><span class="s1">&#39;array&#39;</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">tickvals</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
            <span class="n">ticktext</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;female-favoured&#39;</span><span class="p">,</span> <span class="s1">&#39;neutral&#39;</span><span class="p">,</span> <span class="s1">&#39;male-favoured&#39;</span><span class="p">]</span>
        <span class="p">),</span>
        <span class="n">zmin</span><span class="o">=-</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">zmax</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">traces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span>

<span class="c1"># Create the slider steps.</span>
<span class="n">slider_steps</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">age_range</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">age_bins</span><span class="p">):</span>
    <span class="n">slider_steps</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;update&#39;</span><span class="p">,</span>
        <span class="s1">&#39;args&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;visible&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">i</span> <span class="o">==</span> <span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">traces</span><span class="p">))]},</span>
            <span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">make_title</span><span class="p">(</span><span class="n">age_range</span><span class="p">)},</span>
        <span class="p">],</span>
        <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">age_range</span>
    <span class="p">})</span>

<span class="c1"># Create the main figure.</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">traces</span><span class="p">,</span>
    <span class="n">layout</span><span class="o">=</span><span class="n">go</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">790</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="mi">640</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="n">make_title</span><span class="p">(</span><span class="n">age_bins</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
        <span class="n">geo</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;showocean&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;oceancolor&#39;</span><span class="p">:</span> <span class="s1">&#39;#a8d5f2&#39;</span><span class="p">,</span> <span class="s1">&#39;landcolor&#39;</span><span class="p">:</span> <span class="s1">&#39;#ffffff&#39;</span><span class="p">},</span>
        <span class="n">sliders</span><span class="o">=</span><span class="p">[{</span>
            <span class="s1">&#39;active&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;currentvalue&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="s1">&#39;Selected age: &#39;</span><span class="p">},</span>
            <span class="s1">&#39;steps&#39;</span><span class="p">:</span> <span class="n">slider_steps</span>
        <span class="p">}],</span>
        <span class="n">margin</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;t&#39;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Some additional map configuration.</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_geos</span><span class="p">(</span><span class="n">showcountries</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">showcoastlines</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Add caption above the slider</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_annotation</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">y</span><span class="o">=-</span><span class="mf">0.09</span><span class="p">,</span>
                   <span class="n">xref</span><span class="o">=</span><span class="s1">&#39;paper&#39;</span><span class="p">,</span> <span class="n">yref</span><span class="o">=</span><span class="s1">&#39;paper&#39;</span><span class="p">,</span>
                   <span class="n">xanchor</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
                   <span class="n">yanchor</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
                   <span class="n">arrowhead</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                   <span class="n">ax</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
                   <span class="n">ay</span><span class="o">=-</span><span class="mi">20</span><span class="p">,</span>
                   <span class="n">arrowwidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                   <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Drag the slider to different ages to see the salary gap impact&#39;</span><span class="p">)</span>
    
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>                            <div id="36adcb57-0e52-448f-911e-d589ccb9d7dc" class="plotly-graph-div" style="height:640px; width:790px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("36adcb57-0e52-448f-911e-d589ccb9d7dc")) {                    Plotly.newPlot(                        "36adcb57-0e52-448f-911e-d589ccb9d7dc",                        [{"colorbar":{"len":0.5,"orientation":"h","thickness":10,"tickmode":"array","ticktext":["female-favoured","neutral","male-favoured"],"tickvals":[-100,0,100],"title":{"text":""},"x":0.5,"xanchor":"center","xref":"paper","y":0.92,"yanchor":"bottom","yref":"paper"},"colorscale":[[0.0,"#ff1df1"],[0.5,"#a1daa5"],[1.0,"#352bff"]],"hovertemplate":"\u003cb\u003e%{location}\u003c\u002fb\u003e\u003cbr\u003eSalary gap: %{z:.1f}%\u003cextra\u003e\u003c\u002fextra\u003e","locationmode":"country names","locations":["Afghanistan","Albania","Algeria","Andorra","Angola","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahrain","Bangladesh","Belarus","Belgium","Bhutan","Bosnia and Herzegovina","Brazil","Bulgaria","Cambodia","Cameroon","Canada","Chile","China","Colombia","Costa Rica","Croatia","Cyprus","Czech Republic","Denmark","Dominican Republic","Ecuador","Egypt","El Salvador","Estonia","Ethiopia","Finland","France","Georgia","Germany","Ghana","Greece","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Ivory Coast","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Latvia","Lebanon","Lithuania","Macedonia","Madagascar","Malaysia","Malta","Mauritius","Mexico","Moldova","Mongolia","Morocco","Mozambique","Myanmar","Nepal","Netherlands","New Zealand","Nigeria","North Korea","Norway","Pakistan","Palestine","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Romania","Russia","Saudi Arabia","Serbia","Singapore","Slovakia","Slovenia","South Africa","South Korea","Spain","Sri Lanka","Sweden","Switzerland","Syria","Taiwan","Tanzania","Thailand","Tunisia","Turkey","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Venezuela","Vietnam","Zambia","Zimbabwe"],"visible":true,"z":[-84.33150147613262,32.87592389391524,23.728894354984796,-7.978866993174193,-250.77872877788693,5.066893759172928,-34.22649346601932,-2.782664790938227,22.928713899044265,40.0052413165496,-76.13121014764552,6.88366052884689,-4.998573001182375,31.12207619327052,-418.2616416732439,-129.09201265950836,-4.218785675254351,23.943562075478496,70.00095996928098,24.534896652526886,5.222707427766325,-3.9724199288256172,17.60180682399393,50.58847082355255,-44.41587296654806,27.005934324726873,29.266052421648798,22.510276833414277,-4.186581953223988,47.06419511091845,77.73863508600982,-19.298683158136594,-49.60398943971838,25.315175650898915,-73.19781122772943,0.8056201533632512,1.6040021721098343,54.28306224359402,13.452529471301808,-61.76231747109806,7.604158750682726,63.88529139685476,7.205890460006041,15.08269884631287,7.285817098140979,7.77964594723473,-13.850509333548036,10.526316525522546,22.826003999206268,5.477620026440168,-8.180833556046306,32.331648329173056,3.9965678153045796,82.24657534246576,10.215438139517936,5.837864579422321,60.94434428206854,14.2114095081463,-74.92916990615501,18.922268266216914,16.240628542983316,52.91935175118565,-25.35558320525018,97.19157472417251,37.07556628320307,22.014215092250705,35.13993443419135,18.99230768023827,70.6588267051623,-537.2684161703382,25.276992130118547,67.80538302277432,39.42137105945503,37.515647221512225,-7.998871771952329,4.033652993092248,19.863149310406346,14.42692796376091,16.033050633624306,-9.08690093638782,49.97281870073389,-39.00079633425151,-9.388083906596137,17.15499155284166,26.793544359245576,-0.8255959721130539,-600.0,1.8811491756762975,21.417014132686447,12.425917059566602,43.33905581909537,-4.899659587989259,11.517233769282175,45.82060583687697,8.554106157606087,28.971962616822427,-8.938842703938493,-25.631861910686716,-5.874391253701601,4.706434153106686,-90.82274038836465,13.775180799270803,-180.55498877780042,49.11506650836134,51.447423812574364,24.71324319292544,-118.84670566162674,9.885453280327116,1.4492073646642434,9.52171368350203,-4.82740320567451,-45.94169854826036,55.55595703742514,76.07433761360616,2.7697813330526517,62.78764510439313,21.01799034664327],"zmax":100,"zmin":-100,"type":"choropleth"},{"colorbar":{"len":0.5,"orientation":"h","thickness":10,"tickmode":"array","ticktext":["female-favoured","neutral","male-favoured"],"tickvals":[-100,0,100],"title":{"text":""},"x":0.5,"xanchor":"center","xref":"paper","y":0.92,"yanchor":"bottom","yref":"paper"},"colorscale":[[0.0,"#ff1df1"],[0.5,"#a1daa5"],[1.0,"#352bff"]],"hovertemplate":"\u003cb\u003e%{location}\u003c\u002fb\u003e\u003cbr\u003eSalary gap: %{z:.1f}%\u003cextra\u003e\u003c\u002fextra\u003e","locationmode":"country names","locations":["Afghanistan","Albania","Algeria","Argentina","Armenia","Australia","Austria","Bahamas","Bahrain","Bangladesh","Belarus","Belgium","Bolivia","Bosnia and Herzegovina","Brazil","Bulgaria","Cambodia","Canada","Chile","China","Colombia","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Dominican Republic","Ecuador","Egypt","El Salvador","Estonia","Ethiopia","Fiji","Finland","France","Gabon","Georgia","Germany","Ghana","Greece","Guatemala","Guyana","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kuwait","Kyrgyzstan","Latvia","Lebanon","Lithuania","Luxembourg","Macedonia","Madagascar","Malaysia","Maldives","Malta","Mauritius","Mexico","Montenegro","Morocco","Myanmar","Namibia","Nepal","Netherlands","New Zealand","Nicaragua","Nigeria","Nomadic","North Korea","Norway","Oman","Pakistan","Panama","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Saudi Arabia","Serbia","Singapore","Slovakia","Slovenia","South Africa","South Korea","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Taiwan","Thailand","Trinidad and Tobago","Tunisia","Turkey","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Venezuela","Vietnam","Yemen","Zimbabwe"],"visible":false,"z":[25.16174719155374,-30.331422607164633,20.232160714019194,17.576428843662764,6.935791691890287,10.268866259531736,17.46326441157983,93.29785665455813,0.9138296841175637,13.602368676675761,41.64336698588343,22.035623656402226,-45.333733054623565,36.3488461425397,10.062033074012747,17.698264900731104,-25.455329047188926,11.872284603870842,-4.28370172251895,31.421019694450447,26.05361252523376,-12.356138481122876,32.28418020490202,35.38886245837194,28.72000008083168,8.368351657428889,12.179185355812214,-29.95701103715548,42.059464062557055,10.515630095393602,-17.71585891303791,8.557867714707049,-20.889032100880637,-76.82830308146896,4.281928380123523,14.643770504793643,-7.6923076923076925,47.56680558425761,9.41020137752579,-231.3275993416959,4.23085099022001,28.83229057542846,-61.174785100286535,56.97539106811722,12.83494252868296,31.587411792569974,-3.0266048924984643,13.747657002493247,40.54719360244879,34.7266357102754,66.62139860054688,6.71757603067355,-54.04613203571018,13.488428370118196,19.273486714971096,34.41926678349769,21.43727220535981,56.58783763535145,28.454755614950738,17.383391912704305,24.595523210298932,63.748154719917395,46.54486758545245,-9.910290143056791,25.399352820997816,-43.301805440768135,15.617043618480778,53.04223080590047,21.072083345122817,18.504089123575245,-2.9403112151377067,33.023515996471524,12.888172821112684,65.86275300964878,48.35598364101458,-195.9006454671432,-118.3834778174401,65.85094403350257,19.65987301927911,9.488283193475997,49.10648000848446,-24.116142187916157,65.15693991432815,23.621358005562637,8.166869953319472,24.619912716938998,11.182614109679538,-6.157744772551798,44.018409454562004,-66.98703221335902,17.68967480252147,30.167596846546058,19.351925291402292,27.73792113904141,29.786141318325093,19.603451306054616,25.238639354081055,31.143288053184158,36.28787001375403,23.209775106271355,29.524851166841504,16.164165959439416,39.06735751295337,14.055924702955647,-2.956912033239909,0.8369292873051273,60.30485868529693,7.432552523691747,8.587671795980075,37.842352666951555,25.940406405886375,6.727190047085056,22.31478679176158,41.45668493735685,16.355253160434998,30.797993668261736,28.670504977661693,34.64122789890672,14.996116915443046,5.344616334604772,-12.43535187061356,89.3836994684911,37.03807644995248,-11.93835832446438,71.13778589403826,77.03233605318827],"zmax":100,"zmin":-100,"type":"choropleth"},{"colorbar":{"len":0.5,"orientation":"h","thickness":10,"tickmode":"array","ticktext":["female-favoured","neutral","male-favoured"],"tickvals":[-100,0,100],"title":{"text":""},"x":0.5,"xanchor":"center","xref":"paper","y":0.92,"yanchor":"bottom","yref":"paper"},"colorscale":[[0.0,"#ff1df1"],[0.5,"#a1daa5"],[1.0,"#352bff"]],"hovertemplate":"\u003cb\u003e%{location}\u003c\u002fb\u003e\u003cbr\u003eSalary gap: %{z:.1f}%\u003cextra\u003e\u003c\u002fextra\u003e","locationmode":"country names","locations":["Algeria","Argentina","Australia","Austria","Belarus","Belgium","Benin","Bolivia","Bosnia and Herzegovina","Brazil","Bulgaria","Canada","Chile","China","Colombia","Costa Rica","Croatia","Cyprus","Czech Republic","Denmark","Egypt","Finland","France","Georgia","Germany","Greece","Guatemala","Hong Kong","Hungary","India","Indonesia","Iran","Ireland","Israel","Italy","Japan","Jordan","Kazakhstan","Kenya","Kyrgyzstan","Lithuania","Luxembourg","Macedonia","Malaysia","Malta","Mauritius","Mexico","Nepal","Netherlands","New Zealand","Nicaragua","Nigeria","North Korea","Norway","Pakistan","Peru","Philippines","Poland","Portugal","Romania","Russia","Serbia","Singapore","Slovakia","Slovenia","South Africa","South Korea","Spain","Sri Lanka","Sweden","Switzerland","Taiwan","Thailand","Turkey","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Venezuela","Zimbabwe"],"visible":false,"z":[-84.78410606707142,55.24096495909845,20.357957414814702,26.85754378965936,84.21748991452239,22.53815994032073,-284.1973087447056,23.766467896269592,54.59087785146115,25.96300840385222,34.4270602453002,12.619614703440183,60.24770750207071,48.040656662957,40.34768492603409,-19.561358952595285,50.74829434586508,-2.344919974775448,38.59873249355649,14.403424568243317,46.23088802879947,27.76385795209853,19.12554882597939,38.24223007563498,20.347005443048378,14.482708582225925,-30.206048413479426,-21.804706957545374,50.32828943284624,24.72326503658575,82.25579426060328,-3.8991874543396277,11.823222320391634,11.233370401394547,26.283805269846315,27.69008200401905,33.92652810274453,17.590272344683733,-60.12770509780775,97.5929640487579,45.364157573954536,-6.4299433646746955,-6.32091967707132,-32.3264760871404,31.94171898986075,-21.917151103703404,41.63526712308928,30.719048373392475,29.867498934286864,13.939658366009214,33.107443436441145,12.089071352905234,16.514675205971667,10.971153867560302,38.74660982021435,-0.7643544312969804,73.16326390595432,8.9164287814475,47.83217063468637,28.66157343772428,36.69174965753535,31.950315925014404,-18.54108478639067,44.83168495134468,11.202583242795143,19.511258879197097,35.09933774834437,8.669039472709784,26.65848971277146,13.255322135815813,17.230837557626714,-197.90816455659672,38.979255933855775,57.06295105641425,56.130424720273076,49.73658490657512,18.80455476158476,14.849235265089355,73.44943516043891,54.08710258466807,49.45410432672867],"zmax":100,"zmin":-100,"type":"choropleth"},{"colorbar":{"len":0.5,"orientation":"h","thickness":10,"tickmode":"array","ticktext":["female-favoured","neutral","male-favoured"],"tickvals":[-100,0,100],"title":{"text":""},"x":0.5,"xanchor":"center","xref":"paper","y":0.92,"yanchor":"bottom","yref":"paper"},"colorscale":[[0.0,"#ff1df1"],[0.5,"#a1daa5"],[1.0,"#352bff"]],"hovertemplate":"\u003cb\u003e%{location}\u003c\u002fb\u003e\u003cbr\u003eSalary gap: %{z:.1f}%\u003cextra\u003e\u003c\u002fextra\u003e","locationmode":"country names","locations":["Argentina","Australia","Austria","Belarus","Belgium","Brazil","Bulgaria","Canada","Colombia","Croatia","Denmark","Ecuador","Finland","France","Germany","Greece","Hungary","India","Ireland","Israel","Italy","Japan","Kenya","Lebanon","Mexico","Netherlands","New Zealand","North Korea","Norway","Panama","Portugal","Romania","Russia","Serbia","Slovenia","South Africa","Spain","Sweden","Switzerland","Thailand","United Kingdom","United States"],"visible":false,"z":[35.05674367486597,27.886741431410933,-4.33160247405204,-4.796905222437142,65.53113989112288,24.202636380493576,50.06610042621757,5.870312165161698,55.197156979788865,19.234166520602017,12.901225704518879,3.043709332222524,27.66350923727932,35.523251375894866,22.75385048579945,54.56859887420568,30.74368373145711,52.66046567305113,52.48309985804337,15.504536878952488,52.79520483503482,42.40215338968185,7.628178407669862,77.5,55.61818892484762,23.0763039955458,32.286282483377796,-0.6737917736817951,-7.641426025626731,70.0789914625389,36.049275854616816,28.15069663989877,59.29511008719728,63.193651583147755,10.864701142363755,19.559471960050868,-2.764024228093233,9.590050816171114,-5.132689251827333,19.511323739293676,19.40395961682138,19.982688937331584],"zmax":100,"zmin":-100,"type":"choropleth"},{"colorbar":{"len":0.5,"orientation":"h","thickness":10,"tickmode":"array","ticktext":["female-favoured","neutral","male-favoured"],"tickvals":[-100,0,100],"title":{"text":""},"x":0.5,"xanchor":"center","xref":"paper","y":0.92,"yanchor":"bottom","yref":"paper"},"colorscale":[[0.0,"#ff1df1"],[0.5,"#a1daa5"],[1.0,"#352bff"]],"hovertemplate":"\u003cb\u003e%{location}\u003c\u002fb\u003e\u003cbr\u003eSalary gap: %{z:.1f}%\u003cextra\u003e\u003c\u002fextra\u003e","locationmode":"country names","locations":["Australia","Canada","Denmark","France","Germany","Hungary","Israel","Japan","Mexico","Netherlands","New Zealand","Russia","Spain","United Kingdom","United States"],"visible":false,"z":[34.180693550359265,38.42804546476029,10.803001555072282,-84.25908889159959,2.493191618030168,33.19892473118279,31.943745332007367,-27.54651249525919,56.18737846915326,-13.993090211505082,25.81941333213888,42.80564317653992,25.804934154625187,29.323981708840297,19.678374204321667],"zmax":100,"zmin":-100,"type":"choropleth"},{"colorbar":{"len":0.5,"orientation":"h","thickness":10,"tickmode":"array","ticktext":["female-favoured","neutral","male-favoured"],"tickvals":[-100,0,100],"title":{"text":""},"x":0.5,"xanchor":"center","xref":"paper","y":0.92,"yanchor":"bottom","yref":"paper"},"colorscale":[[0.0,"#ff1df1"],[0.5,"#a1daa5"],[1.0,"#352bff"]],"hovertemplate":"\u003cb\u003e%{location}\u003c\u002fb\u003e\u003cbr\u003eSalary gap: %{z:.1f}%\u003cextra\u003e\u003c\u002fextra\u003e","locationmode":"country names","locations":["Brazil","Canada","Italy","Netherlands","Thailand","United States","Vietnam"],"visible":false,"z":[99.88408996826273,16.274565014041677,-46.83770192937911,-14.245920072165017,22.114782608695656,9.736026943041367,-236.89095127610207],"zmax":100,"zmin":-100,"type":"choropleth"}],                        {"geo":{"landcolor":"#ffffff","oceancolor":"#a8d5f2","showocean":true,"showcountries":true,"showcoastlines":false},"height":640,"margin":{"b":80,"l":20,"r":20,"t":80},"sliders":[{"active":0,"currentvalue":{"prefix":"Selected age: "},"steps":[{"args":[{"visible":[true,false,false,false,false,false]},{"title":"Global Salary Gap Distribution Between Men and Women (18-24 years old)\u003cbr\u003e\u003csup\u003eIn most countries, a neutral or female-favoured pay gap turns male favoured at ages 35+\u003c\u002fsup\u003e"}],"label":"18-24","method":"update"},{"args":[{"visible":[false,true,false,false,false,false]},{"title":"Global Salary Gap Distribution Between Men and Women (25-34 years old)\u003cbr\u003e\u003csup\u003eIn most countries, a neutral or female-favoured pay gap turns male favoured at ages 35+\u003c\u002fsup\u003e"}],"label":"25-34","method":"update"},{"args":[{"visible":[false,false,true,false,false,false]},{"title":"Global Salary Gap Distribution Between Men and Women (35-44 years old)\u003cbr\u003e\u003csup\u003eIn most countries, a neutral or female-favoured pay gap turns male favoured at ages 35+\u003c\u002fsup\u003e"}],"label":"35-44","method":"update"},{"args":[{"visible":[false,false,false,true,false,false]},{"title":"Global Salary Gap Distribution Between Men and Women (45-54 years old)\u003cbr\u003e\u003csup\u003eIn most countries, a neutral or female-favoured pay gap turns male favoured at ages 35+\u003c\u002fsup\u003e"}],"label":"45-54","method":"update"},{"args":[{"visible":[false,false,false,false,true,false]},{"title":"Global Salary Gap Distribution Between Men and Women (55-64 years old)\u003cbr\u003e\u003csup\u003eIn most countries, a neutral or female-favoured pay gap turns male favoured at ages 35+\u003c\u002fsup\u003e"}],"label":"55-64","method":"update"},{"args":[{"visible":[false,false,false,false,false,true]},{"title":"Global Salary Gap Distribution Between Men and Women (65+ years old)\u003cbr\u003e\u003csup\u003eIn most countries, a neutral or female-favoured pay gap turns male favoured at ages 35+\u003c\u002fsup\u003e"}],"label":"65+","method":"update"}]}],"title":{"text":"Global Salary Gap Distribution Between Men and Women (18-24 years old)\u003cbr\u003e\u003csup\u003eIn most countries, a neutral or female-favoured pay gap turns male favoured at ages 35+\u003c\u002fsup\u003e"},"width":790,"template":{"data":{"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#343a42","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#343a42","#4edcda","#645cff","#f25fe9","#f74e4e","#2d8923","#f7b24e","#2b9694","#3a34b5","#a736a0","#b33c3c","#2d8923"],"font":{"color":"#343a42"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"#fdead4","plot_bgcolor":"rgba(0,0,0,0)","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.5},"xaxis":{"automargin":true,"gridcolor":"#d8bea1","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"#d8bea1","zerolinewidth":1},"yaxis":{"automargin":true,"gridcolor":"#d8bea1","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"#d8bea1","zerolinewidth":1}}},"annotations":[{"arrowhead":4,"arrowwidth":2,"ax":30,"ay":-20,"text":"Drag the slider to different ages to see the salary gap impact","x":0.3,"xanchor":"left","xref":"paper","y":-0.09,"yanchor":"bottom","yref":"paper"}]},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('36adcb57-0e52-448f-911e-d589ccb9d7dc');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div></div></div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="simple visible nav section-nav flex-column">
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By InfoVis Group J3
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>